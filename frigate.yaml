# GENERAL
mqtt:
  host: haha.shencentral.net
  port: 1883
  topic_prefix: frigate
  client_id: frigate
  user: frigate
  password: frigate

timestamp_style:
  # Optional: Position of the timestamp (default: shown below)
  #           "tl" (top left), "tr" (top right), "bl" (bottom left), "br" (bottom right)
  position: tl
  # Optional: Format specifier conform to the Python package "datetime" (default: shown below)
  #           Additional Examples:
  #             german: "%d.%m.%Y %H:%M:%S"
  format: '%m/%d/%Y %H:%M:%S'
  # Optional: Color of font
  color:
    # All Required when color is specified (default: shown below)
    red: 255
    green: 255
    blue: 255
  # Optional: Line thickness of font (default: shown below)
  thickness: 2
  # Optional: Effect of lettering (default: shown below)
  #           None (No effect),
  #           "solid" (solid background in inverse color of font)
  #           "shadow" (shadow for font)
  effect: shadow

detectors:
  coral:
    type: edgetpu
    device: pci

# GLOBAL SETTINGS
ffmpeg:
  hwaccel_args: # these are for Intel NUC D54250WYKH (i5-4250)
    - -hwaccel
    - vaapi
    - -hwaccel_device
    - /dev/dri/renderD128
    - -hwaccel_output_format
    - yuv420p
    # the following enables audio recording - comment out if problems
  output_args:
    record: preset-record-generic-audio-aac

# Access restream at rtsp://<frigate_host>:8554/birdseye
birdseye:
  enabled: true
  restream: false
  width: 1280
  height: 720
  quality: 8 # 1 is highest quality, 31 is lowest
  mode: motion

cameras:
  driveway:
    enabled: true
    ffmpeg:
      inputs:
        - path: 
            rtsp://admin:3o96928712@video-driveway.shencentral.net:554/cam/realmonitor?channel=1&subtype=0
          roles:
            - record # use high res stream for record
        - path: 
            rtsp://admin:3o96928712@video-driveway.shencentral.net:554/cam/realmonitor?channel=1&subtype=1
          roles:
            - detect # lower res ok for detect
    detect: # must match low res stream from camera exactly
      width: 640
      height: 480
    objects:
      track:
        - person
        - car
        - motorcycle
        - bicycle
      mask: 0.013,0.014,0.367,0.028,0.374,0.345,0.221,0.391,0.007,0.269
      filters:
        person:
          # Optional: minimum width*height of the bounding box for the detected object (default: 0)
          # min_area: 5000
          # Optional: maximum width*height of the bounding box for the detected object (default: 24000000)
          # max_area: 100000
          # Optional: minimum width/height of the bounding box for the detected object (default: 0)
          # min_ratio: 0.5
          # Optional: maximum width/height of the bounding box for the detected object (default: 24000000)
          # max_ratio: 2.0
          # Optional: minimum score for the object to initiate tracking (default: 0.5)
          min_score: 0.6
          # Optional: minimum decimal percentage for tracked object's computed score to be considered a true positive (default: 0.7)
          threshold: 0.7
          # Optional: mask to prevent this object type from being detected in certain areas (default: no mask)
          # Checks based on the bottom center of the bounding box of the object
          # mask: 0.000,0.000,0.781,0.000,0.781,0.278,0.000,0.278
    motion:
      mask: 0,0,1,0,1,0.266,0.762,0.18,0.397,0.148,0.392,0,0.4,0.36,0,0.456,0,0.373
      threshold: 30    # lower is less sensitive (default: 30)
      contour_area: 10
      improve_contrast: true
    zones:
      street_zone:
        coordinates: 0.248,0.227,0.242,0.135,0.581,0.166,0.777,0.181,1,0.269,1,0.404,0.553,0.281
        inertia: 3
        loitering_time: 0
      driveway_zone:
        coordinates: 142,193,308,175,359,136,571,183,452,480,116,480,0,264
      walk_way_zone:
        coordinates: 0,0.652,0.251,0.471,0.204,0.383,0,0.265
        inertia: 3
        loitering_time: 0
        objects: person
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      retain:
        default: 3 # days to keep all snapshots
    record:
      enabled: true
      retain:
        days: 0
        mode: motion
      alerts:
        pre_capture: 5      # default: 5
        post_capture: 5     # default: 5
        retain:
          days: 14          # default: 14
      detections:
        pre_capture: 5      # default: 5
        post_capture: 5     # default: 5
        retain:
          days: 14          # default: 14
    review:
      alerts:
        required_zones: # only creates an alert if the object encroaches the following zones
          - driveway_zone
      detections:
        required_zones: # only creates a detection if the object encroaches the following zones
          - driveway_zone

  doorbell:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://admin:3o96928712@video-doorbell.shencentral.net:554/h264Preview_01_main
          roles:
            - record # use this high res stream for record
        - path: rtsp://admin:3o96928712@video-doorbell.shencentral.net:554/h264Preview_01_sub
          roles:
            - detect # lower res stream preferred for detect
    detect: # must match low res stream from camera exactly
      width: 640
      height: 480
    objects:
      track:
        - person
    motion:
      mask:
        - 519,146,439,119,599,27,640,103,640,338,511,345
    zones:
      doorbell_zone:
        coordinates: 0,480,519,480,522,0,0,0
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      retain:
        default: 3 # days to keep all snapshots
    record:
      enabled: true
      retain:
        days: 7 # days to keep all motion
        mode: motion
      alerts:
        pre_capture: 5      # default: 5
        post_capture: 5     # default: 5
        retain:
          days: 14          # default: 14
      detections:
        pre_capture: 5      # default: 5
        post_capture: 5     # default: 5
        retain:
          days: 14          # default: 14
  frontporch:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://admin:3o96928712@video-frontporch.shencentral.net:8554/profile0
          roles:
            - record
        - path: rtsp://admin:3o96928712@video-frontporch.shencentral.net:8554/profile1
          roles:
            - detect
    detect: # must match low res stream from camera exactly
      width: 720
      height: 480
    objects:
      track:
        - person
        - book
        - suitcase
        - handbag
    motion:
      threshold: 50 # changes in color - lower is more sensitive (1-255)
      contour_area: 50 # minimum size in pixels that counts as motion 10-high sensivity, 30- medium, 50 - low
      mask:
        - 720,480,606,480,571,432,576,0,720,0
        - 0,480,138,480,179,433,166,0,0,0
    zones:
      frontporch_zone:
        coordinates: 63,480,660,480,663,0,62,0
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      retain:
        default: 14 # days to keep all snapshots

  greatroom:
    enabled: true
    ffmpeg:
      inputs:
        - path: 
            rtsp://admin:3o96928712@video-greatroom.shencentral.net:554/cam/realmonitor?channel=1&subtype=0
          roles:
            - record
        - path: 
            rtsp://admin:3o96928712@video-greatroom.shencentral.net:554/cam/realmonitor?channel=1&subtype=1
          roles:
            - detect
    detect: # must match low res stream from camera exactly
      width: 640
      height: 480
    objects:
      track:
        - person
    motion:
      mask:
        - 0.367,0.356,0.497,0.349,0.498,0.512,0.369,0.516
        - 0.306,0.202,0.477,0.196,0.478,0.244,0.309,0.251
  garage:
    enabled: true
    ffmpeg:
      inputs:
        - path: 
            rtsp://admin:3o96928712@video-garage.shencentral.net:554/cam/realmonitor?channel=1&subtype=0
          roles:
            - record
        - path: 
            rtsp://admin:3o96928712@video-garage.shencentral.net:554/cam/realmonitor?channel=1&subtype=1
          roles:
            - detect
    detect:
      width: 640
      height: 480
    objects:
      track:
        - person

  sunroom:
    enabled: true
    ffmpeg:
      inputs:
        - path: 
            rtsp://admin:3o96928712@video-sunroom.shencentral.net:554/cam/realmonitor?channel=1&subtype=0
          roles:
            - record
        - path: 
            rtsp://admin:3o96928712@video-sunroom.shencentral.net:554/cam/realmonitor?channel=1&subtype=1
          roles:
            - detect
    detect: # must match low res stream from camera exactly
      width: 640
      height: 480
    objects:
      track:
        - person
    motion:
      mask: 0.529,0.093,0.918,0.095,0.912,0,0.527,0
go2rtc:
  streams:
    driveway:
      - rtsp://admin:3o96928712@video-driveway.shencentral.net:554/cam/realmonitor?channel=1&subtype=0
    driveway_sub:
      - rtsp://admin:3o96928712@video-driveway.shencentral.net:554/cam/realmonitor?channel=1&subtype=1
    doorbell:
      - rtsp://admin:3o96928712@video-doorbell.shencentral.net:554/h264Preview_01_main
    doorbell_sub:
      - rtsp://admin:3o96928712@video-doorbell.shencentral.net:554/h264Preview_01_sub
    frontporch:
      - rtsp://admin:3o96928712@video-frontporch.shencentral.net:8554/profile0
    frontporch_sub:
      - rtsp://admin:3o96928712@video-frontporch.shencentral.net:8554/profile1
    greatroom:
      - rtsp://admin:3o96928712@video-greatroom.shencentral.net:554/cam/realmonitor?channel=1&subtype=0
    greatroom_sub:
      - rtsp://admin:3o96928712@video-greatroom.shencentral.net:554/cam/realmonitor?channel=1&subtype=1
    garage:
      - rtsp://admin:3o96928712@video-garage.shencentral.net:554/cam/realmonitor?channel=1&subtype=0
    garage_sub:
      - rtsp://admin:3o96928712@video-garage.shencentral.net:554/cam/realmonitor?channel=1&subtype=1
    sunroom:
      - rtsp://admin:3o96928712@video-sunroom.shencentral.net:554/cam/realmonitor?channel=1&subtype=0
    sunroom_sub:
      - rtsp://admin:3o96928712@video-sunroom.shencentral.net:554/cam/realmonitor?channel=1&subtype=1
version: 0.15-1
